{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text":"Survivor Seasons and Their Winners",
    "dx":500,
    "dy":40,
    "fontSize":20,
  },
  "hconcat": [
  {
    "width":200,
    "height": 800,
    "data": {
      "url": "https://raw.githubusercontent.com/zacharyyahn/vis_class/master/summary2.csv",
      "format": {
        "type": "csv"
      }
    },
    "params": [
      {
        "name": "location_selection",
        "select": {
          "type": "point", 
          "toggle": true,
          "fields": ["season", "location"]
        }
      },
    ],
      "mark": "bar",
      "encoding": {
        "y": {
        "field": "season",
        "type": "ordinal",
        "axis": {
          "title":"Season",
          "tickCount": 40,
          "titleFontSize":12
          },
        "sort":{
          "ascending":true
        }
        },
        "x": {
          "field": "viewers_finale",
          "type": "quantitative",
          "axis":{
            "title":"Finale Viewers",
            "titleFontSize":12
          }
        },
        "color":{
          "condition": {"param": "location_selection", "value":"darkblue"},
          "value": "lightgray",
          "title": "Gross",
          "legend": {
            "legendX": 700,
            "legendY": 530,
            "orient":"none",
            "fillColor":"white"
          }
        },
        "tooltip": [
          {"field": "season_name", "type": "nominal", "title": "Season:"}
          ]
    }
  },
  {
  "vconcat": [
    {
    "width":800,
    "height": 500,
    "layer": [
      {
        "data": {
          "url":"data/us-10m.json",
          "format": {
            "type": "topojson",
            "feature": "states"
          }
        },
        "projection": {
          "type": "equalEarth"
        },
        "mark": {
          "type": "geoshape",
          "fill": "red",
          "stroke": "white"
        }
      },
      {
        "data": {
          "url": "data/world-110m.json",
          "format": {
            "type": "topojson",
            "feature": "countries"
          }
        },
        "projection": {
          "type": "equalEarth"
        },
        "mark": {
          "type": "geoshape",
          "fill": "lightgray",
          "stroke": "white"
        },
        "title":{
          "text":"Filming Locations",
          "dy":480
        }
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/zacharyyahn/vis_class/master/summary2.csv",
          "format": {
            "type": "csv"
          }
        },
        "params": [
          {"name": "location_selection", "select": {"type": "point", "fields": ["location", "season"], "toggle":true}}
        ],
        "projection": {
          "type": "equalEarth"
        },
        "mark": "point",
        "encoding": {
          "longitude": {
            "field": "longitude",
            "type": "quantitative"
          },
          "latitude": {
            "field": "latitude",
            "type": "quantitative"
          },
          "size": {
            "condition": {
              "param": "location_selection",
              "value": 40
            },
            "value": 20
          },
          "color": { 
            "condition": {
              "param": "location_selection",
              "value": "red"
            },
            "value": "gray"
          },
          "tooltip": [
          {"field": "location", "type": "nominal", "title": "Location"}
          ]
        }
      }
    ]
  },
  {
    "width": 800,
    "height": 250,
    "layer": [
      {
        
        "transform": [
          {
            "filter": {
              "field":"season",
              "lte":40
            }
          }
        ],
        "data": {
              "url": "https://raw.githubusercontent.com/zacharyyahn/vis_class/master/castaways.csv",
              "format": {
                "type": "csv"
              }
            },
          "mark": {
            "type":"bar",
            "width": 10
          },
          "encoding": {
            "x": {
              "field":"age",
              "type":"quantitative",
              // "bin": {
              //   "binned":false,
              //   "step":3,
              //   "nice":false
              //  },
              "title": "Age While Playing",
              "scale": {"domain": [18, 75]},
              "titleFontSize":12
            },
            "y": {
              "aggregate":"count",
              "title":"Count",
            },
            "color":{
              "value":"darkblue"
            }
          }
      }, {
        "data": {
          "url": "https://raw.githubusercontent.com/zacharyyahn/vis_class/master/summary2.csv",
          "format": {
            "type": "csv"
          }
        },
        "transform": [
          {"calculate": "1",
          "as": "placeholder2"},
        ],
        "mark": {
          "type":"tick",
          "height":250,
          "strokeWidth":50,
          "yOffset":125,
          "thickness":3
        },
        "encoding": {
          "x": {
            "field":"age",
            "type":"quantitative",
          },
          "y": {
            "field":"placeholder2",
            "type":"quantitative",
            "title":null,
            "axis":null
          },
          "color":{
            "value":"red"
          },
          "opacity":{
            "condition": {"param":"location_selection","value":1, "empty":false},
            "value": 0
          },
        }
      }
      // }, {
      //   "data": {
      //     "url": "https://raw.githubusercontent.com/zacharyyahn/vis_class/master/summary2.csv",
      //     "format": {
      //       "type": "csv"
      //     }
      //   },
      //   "transform": [
      //     {"calculate": "1",
      //     "as": "placeholder2"},
      //   ],
      //   "mark": {
      //     "type":"bar",
      //     "width":3
      //   },
      //   "encoding": {
      //     "x": {
      //       "field":"age",
      //       "type":"quantitative",
      //     },
      //     "y": {
      //       "field":"placeholder2",
      //       "type":"quantitative",
      //       "title":"Count (Winners)",
      //       "scale": {"domain": [0, 10]},
      //     },
      //     "color":{
      //       // "condition": {"param":"location_selection","value":"red", "empty":false},
      //       "value": "red",
      //       "field": "age",
      //       "scale": {
      //       "range": ["red"],
      //     }
      //     },
      //     "opacity":{
      //       "condition": {"param":"location_selection","value":1, "empty":true},
      //       "value": 0
      //     },
      //   }
      // }
    ],
    "resolve": {"scale": {"y": "independent"},
    "legend":{"size":"shared"}},
  }
  ]
  },
  {
    "data": {
      "url": "https://raw.githubusercontent.com/zacharyyahn/vis_class/master/summary2.csv",
      "format": {
        "type": "csv"
      }
    },
    
    "transform": [
      {"calculate": "0",
      "as": "placeholder"},
    ],
    "encoding":{
      "y": {
        "field": "full_name",
        "type": "nominal",
        "title": "Winners",
        "axis": null
      },
    },
    "layer":[{
    "params": [
    {
      "name": "location_selection",
      "select": {
        "type": "point", 
        "toggle": true,
        "fields": ["season", "location"]
      }
    },
  ],
    "mark": {
      "type": "point",
      "align": "left",
      "cornerRadiusBottomLeft":7,
      "cornerRadiusTopLeft":7
    },
    "title":{
      "text":"Winners",
      "align":"left",
      "dx":-110,
      "dy":-3
    },
    "encoding": {
      "x": {
        "field": "placeholder",
        "type": "quantitative",
        "scale": {"domain": [0, 1]},
        "axis":null,
      },
      "color": {
        "condition": {"param":"location_selection","value":"red"},
        "value":"lightgray"
      },
      "size": {
        "condition": {"param":"location_selection","value":30},
        "value":10
      }
    }
    },
    {
      "mark": {"type": "text", "align": "left", "x": 10},
      "encoding": {
        "text": {"field": "full_name"},
        "detail": {"aggregate": "count"}
      },
    }
    ]
  }
  ],
  "config": {
    "style": {
      "cell": {
        "stroke": "transparent"
      }
    }
  }
}